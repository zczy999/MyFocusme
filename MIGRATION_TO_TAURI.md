# MyFocusme: JavaFX â†’ Tauri è¿ç§»æ–¹æ¡ˆ

## ğŸ“‹ ç›®å½•
1. [é¡¹ç›®èƒŒæ™¯](#é¡¹ç›®èƒŒæ™¯)
2. [ç°æœ‰æ¶æ„åˆ†æ](#ç°æœ‰æ¶æ„åˆ†æ)
3. [æ¡†æ¶æœ¬è´¨è§£æ](#æ¡†æ¶æœ¬è´¨è§£æ)
4. [Tauri æ¶æ„è®¾è®¡](#tauri-æ¶æ„è®¾è®¡)
5. [æŠ€æœ¯æ ˆå¯¹æ¯”](#æŠ€æœ¯æ ˆå¯¹æ¯”)
6. [åŠŸèƒ½è¿ç§»æ˜ å°„](#åŠŸèƒ½è¿ç§»æ˜ å°„)
7. [å®æ–½æ–¹æ¡ˆï¼ˆæ–¹æ¡ˆäºŒï¼šä¿ç•™Javaåç«¯ï¼‰](#å®æ–½æ–¹æ¡ˆæ–¹æ¡ˆäºŒä¿ç•™javaåç«¯)
8. [é£é™©è¯„ä¼°](#é£é™©è¯„ä¼°)
9. [æ—¶é—´è®¡åˆ’ï¼ˆæ–¹æ¡ˆäºŒï¼‰](#æ—¶é—´è®¡åˆ’æ–¹æ¡ˆäºŒ)
10. [å†³ç­–å»ºè®®](#å†³ç­–å»ºè®®)

## é¡¹ç›®èƒŒæ™¯

MyFocusme æ˜¯ä¸€ä¸ª macOS ä¸“æ³¨å­¦ä¹ åº”ç”¨ï¼Œå½“å‰ä½¿ç”¨ JavaFX å¼€å‘ã€‚è€ƒè™‘åˆ°ç°ä»£åŒ–éœ€æ±‚å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œè®¡åˆ’è¿ç§»åˆ° Tauri æ¡†æ¶ã€‚

### è¿ç§»åŠ¨æœº
- JavaFX æŠ€æœ¯æ ˆç›¸å¯¹é™ˆæ—§ï¼Œç¤¾åŒºæ´»è·ƒåº¦ä¸‹é™
- JVM å¯åŠ¨æ…¢ï¼Œå†…å­˜å ç”¨å¤§ï¼ˆ150MB+ï¼‰
- æ‰“åŒ…ä½“ç§¯å¤§ï¼ˆ50MB+ï¼‰ï¼Œéœ€è¦ Java è¿è¡Œæ—¶
- å¸Œæœ›è·å¾—æ›´ç°ä»£çš„å¼€å‘ä½“éªŒå’Œæ›´å¥½çš„æ€§èƒ½

## ç°æœ‰æ¶æ„åˆ†æ

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
1. **ç½‘ç«™å±è”½ç›‘æ§**
   - æ¯ 100ms ç›‘æ§ Microsoft Edge æµè§ˆå™¨
   - åŒå±‚å±è”½æœºåˆ¶ï¼šç¡¬ç¼–ç å±è”½ + ç”¨æˆ·è‡ªå®šä¹‰å±è”½

2. **åŒæ¨¡å¼ç³»ç»Ÿ**
   - **æ™®é€šæ¨¡å¼**ï¼šä»…åŸºç¡€å±è”½åŠŸèƒ½
   - **å­¦ä¹ æ¨¡å¼**ï¼šå®Œæ•´å±è”½åŠŸèƒ½ï¼Œé™æ—¶ä¸“æ³¨

3. **æ—¶é—´ç®¡ç†**
   - å­¦ä¹ æ¨¡å¼å€’è®¡æ—¶ï¼ˆ15åˆ†é’Ÿ-8å°æ—¶ï¼‰
   - 17:00 åç¦æ­¢åˆ‡æ¢åˆ°å­¦ä¹ æ¨¡å¼
   - æ¯å¤© 17:00 è‡ªåŠ¨åˆ‡æ¢å›æ™®é€šæ¨¡å¼

4. **é…ç½®ç®¡ç†**
   - å±è”½ç½‘ç«™åˆ—è¡¨ï¼ˆ`~/.config/myfocusme/`ï¼‰
   - ç™½åå•ç®¡ç†
   - ç”¨æˆ·é…ç½®æŒä¹…åŒ–

5. **macOS ç³»ç»Ÿé›†æˆ**
   - AppleScript æ§åˆ¶æµè§ˆå™¨
   - ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡
   - çª—å£æ˜¾ç¤º/éšè—

### ç°æœ‰æŠ€æœ¯æ ˆ
- **è¯­è¨€**: Java 11
- **UIæ¡†æ¶**: JavaFX 17
- **æ„å»ºå·¥å…·**: Maven
- **JSONå¤„ç†**: Jackson
- **ç³»ç»Ÿé›†æˆ**: AppleScript via Runtime.exec()
- **æµ‹è¯•**: JUnit 5 + Mockito

### ä»£ç ç»Ÿè®¡
- **Javaæ–‡ä»¶**: 16ä¸ªæ ¸å¿ƒç±»
- **ä»£ç è¡Œæ•°**: ~2000è¡Œ
- **æµ‹è¯•ç”¨ä¾‹**: 139ä¸ª

## æ¡†æ¶æœ¬è´¨è§£æ

åœ¨æ·±å…¥æ¶æ„è®¾è®¡å‰ï¼Œå¿…é¡»æ¾„æ¸…ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼š**Tauri å’Œ Electron éƒ½ä¸æ˜¯çº¯å‰ç«¯æ¡†æ¶**ã€‚

### ğŸ—ï¸ æ¡Œé¢åº”ç”¨æ¡†æ¶çš„çœŸå®æ¶æ„

#### Tauri æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Tauri åº”ç”¨æ¶æ„              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    å‰ç«¯å±‚ (WebæŠ€æœ¯)          â”‚   â”‚
â”‚  â”‚  HTML + CSS + JavaScript    â”‚   â”‚
â”‚  â”‚  (React/Vue/Svelteç­‰)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                       â”‚
â”‚             â”‚ IPCé€šä¿¡               â”‚
â”‚             â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Rust åç«¯æ ¸å¿ƒ             â”‚   â”‚
â”‚  â”‚  - çª—å£ç®¡ç†                 â”‚   â”‚
â”‚  â”‚  - ç³»ç»ŸAPIè°ƒç”¨              â”‚   â”‚
â”‚  â”‚  - æ–‡ä»¶ç³»ç»Ÿè®¿é—®             â”‚   â”‚
â”‚  â”‚  - å®‰å…¨æ§åˆ¶                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  ğŸ“¦ ä½¿ç”¨ç³»ç»Ÿ WebView æ¸²æŸ“          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Electron æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Electron åº”ç”¨               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   æ¸²æŸ“è¿›ç¨‹ (Renderer Process)   â”‚  â”‚
â”‚  â”‚   HTML/CSS/JavaScript          â”‚  â”‚
â”‚  â”‚   è¿è¡Œåœ¨ Chromium ä¸­            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                      â”‚
â”‚               â”‚ IPC é€šä¿¡              â”‚
â”‚               â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    ä¸»è¿›ç¨‹ (Main Process)        â”‚  â”‚
â”‚  â”‚    Node.js ç¯å¢ƒ                 â”‚  â”‚
â”‚  â”‚    ç³»ç»ŸAPIè®¿é—®                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  ğŸ“¦ æ‰“åŒ…å®Œæ•´ Chromium + Node.js      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š æ¡†æ¶æ¶æ„å¯¹æ¯”

| ç‰¹æ€§ | çº¯Webåº”ç”¨ | Electron | Tauri | JavaFX |
|------|----------|----------|--------|---------|
| **å‰ç«¯æŠ€æœ¯** | HTML/JS/CSS | HTML/JS/CSS | HTML/JS/CSS | FXML/Java |
| **åç«¯æŠ€æœ¯** | æ—  | **Node.js** | **Rust** | **Java** |
| **æ¸²æŸ“å¼•æ“** | æµè§ˆå™¨ | Chromium | ç³»ç»ŸWebView | JavaFXå¼•æ“ |
| **ç³»ç»Ÿè®¿é—®** | âŒ | âœ… Node.js | âœ… Rust | âœ… Java |
| **æ–‡ä»¶æ“ä½œ** | âŒ | âœ… | âœ… | âœ… |
| **è¿›ç¨‹é€šä¿¡** | æ—  | IPC | IPC | å•è¿›ç¨‹ |
| **åŒ…ä½“ç§¯** | ~1MB | 50-150MB | 5-15MB | 30-50MB |
| **å†…å­˜å ç”¨** | æµè§ˆå™¨å†³å®š | 100-300MB | 20-50MB | 100-150MB |

### ğŸ”‘ å…³é”®è®¤çŸ¥

1. **æ‰€æœ‰æ¡Œé¢æ¡†æ¶éƒ½æ˜¯å‰åç«¯æ··åˆæ¶æ„**
   - Electron = Webå‰ç«¯ + Node.jsåç«¯
   - Tauri = Webå‰ç«¯ + Ruståç«¯
   - JavaFX = FXMLå‰ç«¯ + Javaåç«¯

2. **"çº¯å‰ç«¯"æ¡Œé¢åº”ç”¨ä¸å­˜åœ¨**
   - è®¿é—®æ–‡ä»¶ç³»ç»Ÿéœ€è¦åç«¯èƒ½åŠ›
   - è°ƒç”¨ç³»ç»ŸAPIéœ€è¦åç«¯èƒ½åŠ›
   - çª—å£ç®¡ç†éœ€è¦åç«¯èƒ½åŠ›

3. **é€‰æ‹©æ¡†æ¶çš„æœ¬è´¨æ˜¯é€‰æ‹©åç«¯æŠ€æœ¯**
   - é€‰Electron = é€‰æ‹©ç”¨JavaScriptåšåç«¯
   - é€‰Tauri = é€‰æ‹©ç”¨Ruståšåç«¯
   - ä¿æŒJavaFX = ç»§ç»­ç”¨Javaåšåç«¯

### ğŸ’¡ å¯¹æœ¬é¡¹ç›®çš„å¯ç¤º

#### è¿ç§»çš„æœ¬è´¨ä¸æ˜¯"å‰ç«¯åŒ–"
- âŒ é”™è¯¯ç†è§£ï¼šæŠŠJavaåº”ç”¨å˜æˆçº¯å‰ç«¯åº”ç”¨
- âœ… æ­£ç¡®ç†è§£ï¼šæŠŠJavaFXç•Œé¢æ¢æˆReactï¼Œåç«¯å¯ä»¥ä¿ç•™Java

#### æ¶æ„é€‰æ‹©çš„çœŸå®è€ƒé‡
```yaml
å¦‚æœå®Œå…¨é‡å†™åˆ°Tauri:
  å‰ç«¯: JavaFX â†’ React âœ…
  åç«¯: Java â†’ Rust âŒï¼ˆéœ€è¦é‡å†™æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ï¼‰

å¦‚æœTauri+Javaæ··åˆ:
  å‰ç«¯: JavaFX â†’ React âœ…
  åç«¯: Java â†’ Java âœ…ï¼ˆä¿ç•™ç°æœ‰ä»£ç ï¼‰
  é€šä¿¡: ç›´æ¥è°ƒç”¨ â†’ WebSocket ğŸ”„
```

### ğŸ¯ å®é™…æ”¶ç›Šåˆ†æ

| è¿ç§»æ–¹æ¡ˆ | UIç°ä»£åŒ– | æ€§èƒ½æå‡ | å¼€å‘æˆæœ¬ | é£é™©ç­‰çº§ |
|---------|---------|---------|---------|---------|
| ä¿æŒJavaFX | âŒ | - | 0 | æ—  |
| Tauriçº¯Rust | âœ… | â­â­â­ | 4å‘¨ | é«˜ |
| Tauri+Java | âœ… | â­ | 2å‘¨ | ä½ |
| Electron+Java | âœ… | âŒ | 2å‘¨ | ä½ |

### ğŸ“ æ¡†æ¶é€‰æ‹©å†³ç­–æ ‘

```
æ˜¯å¦æ»¡æ„å½“å‰UIï¼Ÿ
â”œâ”€ æ˜¯ â†’ ä¿æŒJavaFX âœ…
â””â”€ å¦ â†’ æ˜¯å¦æ„¿æ„é‡å†™åç«¯ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ å­¦Rustç”¨Tauri âš¡
    â””â”€ å¦ â†’ æ˜¯å¦åœ¨æ„åŒ…ä½“ç§¯ï¼Ÿ
        â”œâ”€ æ˜¯ â†’ Tauri+Java ğŸ“¦
        â””â”€ å¦ â†’ Electron+Java ğŸš€
```

## Tauri æ¶æ„è®¾è®¡

### æ¶æ„é€‰é¡¹å¯¹æ¯”

#### æ–¹æ¡ˆä¸€ï¼šå®Œå…¨è¿ç§»åˆ° Rustï¼ˆåŸæ–¹æ¡ˆï¼‰
**æ¶æ„**ï¼šTauriå‰ç«¯ + Ruståç«¯ï¼ˆä¸€ä½“åŒ–ï¼‰
```yaml
å‰ç«¯:
  - æ¡†æ¶: React 18 + TypeScript
  - æ ·å¼: Tailwind CSS
  - çŠ¶æ€ç®¡ç†: Zustand
  - æ„å»º: Vite

åç«¯:
  - è¯­è¨€: Rust
  - æ¡†æ¶: Tauri 2.0
  - å¼‚æ­¥è¿è¡Œæ—¶: Tokio
```

**ä¼˜ç‚¹**ï¼š
- âœ… æœ€ä½³æ€§èƒ½ï¼ˆå¯åŠ¨<0.5sï¼Œå†…å­˜<20MBï¼‰
- âœ… å•ä¸€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéƒ¨ç½²ç®€å•
- âœ… æ— éœ€JVMï¼Œä½“ç§¯æœ€å°ï¼ˆ~10MBï¼‰

**ç¼ºç‚¹**ï¼š
- âŒ éœ€è¦å®Œå…¨é‡å†™Javaä»£ç 
- âŒ Rustå­¦ä¹ æˆæœ¬é«˜
- âŒ è¿ç§»æ—¶é—´é•¿ï¼ˆ~1ä¸ªæœˆï¼‰

#### æ–¹æ¡ˆäºŒï¼šTauri + Javaåç«¯æœåŠ¡ï¼ˆæ¨èï¼‰â­
**æ¶æ„**ï¼šTauriå‰ç«¯ + ç‹¬ç«‹Javaåç«¯è¿›ç¨‹
```yaml
å‰ç«¯:
  - æ¡†æ¶: React 18 + TypeScript
  - é€šä¿¡: WebSocket/REST API
  - Tauri: ä»…åšçª—å£ç®¡ç†å’Œç³»ç»Ÿæ‰˜ç›˜

åç«¯:
  - ä¿ç•™ç°æœ‰Javaä»£ç 
  - æ–°å¢: Spring Boot WebæœåŠ¡å™¨
  - é€šä¿¡: WebSocketå®æ—¶é€šä¿¡
  - éƒ¨ç½²: éšTauriå¯åŠ¨çš„å­è¿›ç¨‹
```

**ä¼˜ç‚¹**ï¼š
- âœ… ä¿ç•™95%ç°æœ‰Javaä»£ç 
- âœ… è¿ç§»æˆæœ¬ä½ï¼Œé£é™©å°
- âœ… å¼€å‘é€Ÿåº¦å¿«ï¼ˆ~2å‘¨ï¼‰
- âœ… å›¢é˜Ÿç†Ÿæ‚‰Javaï¼Œç»´æŠ¤å®¹æ˜“

**ç¼ºç‚¹**ï¼š
- âš ï¸ éœ€è¦JVMï¼ˆä½†å¯æ‰“åŒ…ç²¾ç®€ç‰ˆJREï¼‰
- âš ï¸ å†…å­˜å ç”¨è¾ƒé«˜ï¼ˆ~80MBï¼‰
- âš ï¸ å¯åŠ¨ç¨æ…¢ï¼ˆ~1.5sï¼‰

#### æ–¹æ¡ˆä¸‰ï¼šæ··åˆæ¶æ„ï¼ˆå¹³è¡¡æ–¹æ¡ˆï¼‰
**æ¶æ„**ï¼šTauriå‰ç«¯ + Rustç³»ç»Ÿé›†æˆ + Javaä¸šåŠ¡é€»è¾‘
```yaml
å‰ç«¯:
  - React + TypeScript

Rustå±‚ï¼ˆè½»é‡ï¼‰:
  - macOSç³»ç»Ÿé›†æˆï¼ˆAppleScriptï¼‰
  - æ–‡ä»¶æ“ä½œ
  - Javaè¿›ç¨‹ç®¡ç†

Javaå±‚ï¼ˆæ ¸å¿ƒä¸šåŠ¡ï¼‰:
  - æ¨¡å¼ç®¡ç†
  - é…ç½®ç®¡ç†
  - å±è”½é€»è¾‘
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ€§èƒ½å’Œå¼€å‘æ•ˆç‡å¹³è¡¡
- âœ… é€æ­¥è¿ç§»ï¼Œé™ä½é£é™©
- âœ… ä¿ç•™æ ¸å¿ƒJavaä»£ç 

**ç¼ºç‚¹**ï¼š
- âš ï¸ æ¶æ„ç¨å¤æ‚
- âš ï¸ éœ€è¦ç»´æŠ¤ä¸¤ç§è¯­è¨€

### æ¨èæ–¹æ¡ˆï¼šæ–¹æ¡ˆäºŒï¼ˆTauri + Javaåç«¯æœåŠ¡ï¼‰

### é¡¹ç›®ç»“æ„ï¼ˆæ–¹æ¡ˆäºŒï¼‰
```
myfocusme-tauri/
â”œâ”€â”€ frontend/                   # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ModeSwitch.tsx     # æ¨¡å¼åˆ‡æ¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ WebsiteManager.tsx # ç½‘ç«™ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ StatsPanel.tsx     # ç»Ÿè®¡é¢æ¿
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.ts            # WebSocket/REST å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ App.tsx               # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ src-tauri/                  # Tauri è½»é‡åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs            # çª—å£ç®¡ç†å’ŒJavaè¿›ç¨‹å¯åŠ¨
â”‚   â”‚   â””â”€â”€ java_bridge.rs     # Javaè¿›ç¨‹é€šä¿¡æ¡¥æ¥
â”‚   â””â”€â”€ tauri.conf.json
â”‚
â”œâ”€â”€ java-backend/               # ä¿ç•™ç°æœ‰Javaä»£ç 
â”‚   â”œâ”€â”€ src/main/java/com/tsymq/
â”‚   â”‚   â”œâ”€â”€ AppBlocker.java        # åŸæœ‰ä»£ç ä¿ç•™
â”‚   â”‚   â”œâ”€â”€ ModeManager.java       # åŸæœ‰ä»£ç ä¿ç•™
â”‚   â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”‚   â”œâ”€â”€ WebSocketServer.java  # æ–°å¢WebSocketæœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ RestController.java   # æ–°å¢REST API
â”‚   â”‚   â””â”€â”€ [å…¶ä»–ç°æœ‰ä»£ç ...]
â”‚   â””â”€â”€ pom.xml                # æ·»åŠ Spring Bootä¾èµ–
â”‚
â””â”€â”€ scripts/
    â”œâ”€â”€ build.sh               # æ„å»ºè„šæœ¬
    â””â”€â”€ package.sh             # æ‰“åŒ…è„šæœ¬
```

### Javaåç«¯æ”¹é€ ï¼ˆæœ€å°åŒ–æ”¹åŠ¨ï¼‰
```java
// æ–°å¢ WebSocketServer.java
@Component
@ServerEndpoint("/ws")
public class WebSocketServer {
    private final AppBlocker appBlocker;
    private final ModeManager modeManager;

    @OnMessage
    public void handleMessage(String message, Session session) {
        // å¤„ç†å‰ç«¯è¯·æ±‚ï¼Œè°ƒç”¨ç°æœ‰æ–¹æ³•
        JsonNode request = mapper.readTree(message);
        String action = request.get("action").asText();

        switch(action) {
            case "switchMode":
                int duration = request.get("duration").asInt();
                boolean success = modeManager.switchToFocusMode(duration);
                session.send(createResponse(success));
                break;
            case "blockWebsite":
                String url = request.get("url").asText();
                appBlocker.block(url);
                break;
        }
    }
}
```

## æŠ€æœ¯æ ˆå¯¹æ¯”

| æ–¹é¢ | JavaFX (å½“å‰) | Tauri+Rust (æ–¹æ¡ˆä¸€) | Tauri+Java (æ–¹æ¡ˆäºŒ) |
|------|-------------|-------------------|-------------------|
| **å¯åŠ¨é€Ÿåº¦** | ~3ç§’ | ~0.5ç§’ | ~1.5ç§’ |
| **å†…å­˜å ç”¨** | 150MB | 20MB | 80MB |
| **æ‰“åŒ…ä½“ç§¯** | 50MB | 10MB | 25MB |
| **å¼€å‘æ—¶é—´** | - | 4å‘¨ | 2å‘¨ |
| **ä»£ç é‡ç”¨** | - | 0% | 95% |
| **å­¦ä¹ æˆæœ¬** | - | é«˜(Rust) | ä½ |
| **ç»´æŠ¤éš¾åº¦** | ä¸­ | é«˜ | ä½ |
| **æ€§èƒ½è¡¨ç°** | â˜…â˜…â˜† | â˜…â˜…â˜… | â˜…â˜…â˜† |

## åŠŸèƒ½è¿ç§»æ˜ å°„

### æ–¹æ¡ˆäºŒï¼šä¿ç•™Javaåç«¯çš„è¿ç§»æ˜ å°„

| åŸJavaFXç»„ä»¶ | è¿ç§»å | æ”¹åŠ¨è¯´æ˜ |
|-----------|--------|---------|
| `AppBlocker.java` | ä¿ç•™ + æ·»åŠ WebSocketæ¥å£ | æ·»åŠ æ¶ˆæ¯æ¨é€ |
| `ModeManager.java` | ä¿ç•™ + æ·»åŠ REST API | æš´éœ²HTTPæ¥å£ |
| `ModeState.java` | å®Œå…¨ä¿ç•™ | æ— éœ€æ”¹åŠ¨ |
| `ConfigManager.java` | å®Œå…¨ä¿ç•™ | æ— éœ€æ”¹åŠ¨ |
| `BlockedSitesConfig.java` | å®Œå…¨ä¿ç•™ | æ— éœ€æ”¹åŠ¨ |
| `CommandUtil.java` | å®Œå…¨ä¿ç•™ | æ— éœ€æ”¹åŠ¨ |
| `JavaFX UI` | React + TypeScript | å®Œå…¨é‡å†™ |
| `FXMLæ–‡ä»¶` | Reactç»„ä»¶ | å®Œå…¨é‡å†™ |

### JavaFX UI â†’ React ç»„ä»¶æ˜ å°„

| JavaFX | React | è¯´æ˜ |
|--------|-------|------|
| `AppBlocker.fxml` | `App.tsx` | ä¸»ç•Œé¢å¸ƒå±€ |
| `AppBlockerController.java` | `App.tsx` + hooks | ç•Œé¢é€»è¾‘ |
| `FocusModeDialog.fxml` | `ModeSwitch.tsx` | æ¨¡å¼åˆ‡æ¢å¯¹è¯æ¡† |
| `UIStateManager.java` | `modeStore.ts` | UIçŠ¶æ€ç®¡ç† |
| `NotificationManager.java` | Tauri Notification API | ç³»ç»Ÿé€šçŸ¥ |

## å®æ–½æ–¹æ¡ˆï¼ˆæ–¹æ¡ˆäºŒï¼šä¿ç•™Javaåç«¯ï¼‰

### ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒå‡†å¤‡ï¼ˆ1å¤©ï¼‰
1. å®‰è£…Tauriç¯å¢ƒ
   ```bash
   # å®‰è£… Rustï¼ˆä»…ç”¨äºTauriçª—å£ç®¡ç†ï¼‰
   curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

   # å®‰è£… Tauri CLI
   npm install -g @tauri-apps/cli

   # åˆ›å»ºé¡¹ç›®
   npm create tauri-app@latest -- --template react-ts
   ```

2. Javaåç«¯å‡†å¤‡
   ```xml
   <!-- åœ¨ç°æœ‰pom.xmlä¸­æ·»åŠ Spring Bootä¾èµ– -->
   <dependency>
       <groupId>org.springframework.boot</groupId>
       <artifactId>spring-boot-starter-websocket</artifactId>
       <version>3.2.0</version>
   </dependency>
   ```

### ç¬¬äºŒé˜¶æ®µï¼šJavaåç«¯æ”¹é€ ï¼ˆ3å¤©ï¼‰

#### Day 1: æ·»åŠ WebæœåŠ¡å™¨å±‚
```java
// Application.java - Spring Bootå¯åŠ¨ç±»
@SpringBootApplication
public class MyFocusmeServer {
    public static void main(String[] args) {
        // ä¿ç•™åŸæœ‰åˆå§‹åŒ–é€»è¾‘
        AppBlocker appBlocker = new AppBlocker();
        ModeManager modeManager = new ModeManager();

        // å¯åŠ¨Spring Boot
        SpringApplication.run(MyFocusmeServer.class, args);
    }
}
```

#### Day 2: æš´éœ²WebSocketæ¥å£
```java
// å¤ç”¨ç°æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œä»…æ·»åŠ é€šä¿¡å±‚
@RestController
@CrossOrigin(origins = "tauri://localhost")
public class ApiController {
    @Autowired
    private AppBlocker appBlocker;

    @Autowired
    private ModeManager modeManager;

    @PostMapping("/api/mode/switch")
    public ResponseEntity<?> switchMode(@RequestBody ModeRequest request) {
        boolean success = modeManager.switchToFocusMode(request.getDuration());
        return ResponseEntity.ok(Map.of("success", success));
    }

    @GetMapping("/api/mode/status")
    public ResponseEntity<?> getModeStatus() {
        return ResponseEntity.ok(Map.of(
            "mode", modeManager.getCurrentMode(),
            "remainingTime", modeManager.getRemainingTimeMs()
        ));
    }
}
```

#### Day 3: ä¿æŒåŸæœ‰ç›‘æ§é€»è¾‘
```java
// AppBlocker.java - ä»…æ·»åŠ äº‹ä»¶æ¨é€
public class AppBlocker {
    // åŸæœ‰ä»£ç ä¿æŒä¸å˜

    @Autowired(required = false)
    private SimpMessagingTemplate messagingTemplate;

    private void notifyFrontend(String event, Object data) {
        if (messagingTemplate != null) {
            messagingTemplate.convertAndSend("/topic/events",
                Map.of("event", event, "data", data));
        }
    }
}
```

### ç¬¬ä¸‰é˜¶æ®µï¼šå‰ç«¯å¼€å‘ï¼ˆ4å¤©ï¼‰

#### Day 1-2: Reactç•Œé¢æ­å»º
```tsx
// App.tsx - ä¸»ç•Œé¢
import { useEffect, useState } from 'react';
import { WebSocketClient } from './services/websocket';

function App() {
  const [mode, setMode] = useState<'normal' | 'focus'>('normal');
  const ws = new WebSocketClient('ws://localhost:8080/ws');

  useEffect(() => {
    ws.connect();
    ws.on('modeChange', (data) => {
      setMode(data.mode);
    });
  }, []);

  return (
    <div className="app">
      {/* å¤åˆ»JavaFXç•Œé¢è®¾è®¡ */}
    </div>
  );
}
```

#### Day 3: Taurié›†æˆ
```rust
// main.rs - æœ€å°åŒ–Rustä»£ç 
#![cfg_attr(not(debug_assertions), windows_subsystem = "windows")]

use std::process::Command;

#[tauri::command]
fn start_java_backend() {
    Command::new("java")
        .arg("-jar")
        .arg("../java-backend/target/myfocusme.jar")
        .spawn()
        .expect("Failed to start Java backend");
}

fn main() {
    tauri::Builder::default()
        .setup(|app| {
            start_java_backend();
            Ok(())
        })
        .run(tauri::generate_context!())
        .expect("error while running tauri application");
}
```

#### Day 4: ç³»ç»Ÿæ‰˜ç›˜å’Œæ‰“åŒ…
```javascript
// tauri.conf.json é…ç½®
{
  "tauri": {
    "systemTray": {
      "iconPath": "icons/icon.png",
      "iconAsTemplate": true
    }
  }
}
```

### ç¬¬ä¸‰é˜¶æ®µï¼šåŠŸèƒ½å®Œå–„ï¼ˆ1å‘¨ï¼‰
1. é…ç½®æ–‡ä»¶è¿ç§»
2. ç³»ç»Ÿæ‰˜ç›˜å®ç°
3. è‡ªåŠ¨æ›´æ–°åŠŸèƒ½
4. é”™è¯¯å¤„ç†ä¼˜åŒ–
5. æ€§èƒ½è°ƒä¼˜

### ç¬¬å››é˜¶æ®µï¼šæµ‹è¯•å’Œæ‰“åŒ…ï¼ˆ3å¤©ï¼‰
1. å•å…ƒæµ‹è¯•è¿ç§»
2. é›†æˆæµ‹è¯•
3. macOS åº”ç”¨ç­¾å
4. æ‰“åŒ…å’Œåˆ†å‘

## é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©
| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| Rust å­¦ä¹ æ›²çº¿ | é«˜ | æå‰å­¦ä¹  Rust åŸºç¡€ï¼Œä½¿ç”¨ AI è¾…åŠ© |
| AppleScript å…¼å®¹æ€§ | ä¸­ | ä¿æŒåŸæœ‰å®ç°æ–¹å¼ï¼Œå°è£…ä¸º Rust å‡½æ•° |
| çŠ¶æ€åŒæ­¥å¤æ‚æ€§ | ä¸­ | ä½¿ç”¨ Tauri çš„äº‹ä»¶ç³»ç»Ÿ |
| macOS æƒé™é—®é¢˜ | ä½ | æå‰æµ‹è¯•æƒé™ç”³è¯·æµç¨‹ |

### ä¸šåŠ¡é£é™©
| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| åŠŸèƒ½é—æ¼ | é«˜ | è¯¦ç»†çš„åŠŸèƒ½æ¸…å•å’Œæµ‹è¯• |
| ç”¨æˆ·æ•°æ®è¿ç§» | ä¸­ | æä¾›æ•°æ®è¿ç§»å·¥å…· |
| ç”¨æˆ·ä½“éªŒå˜åŒ– | ä½ | ä¿æŒç›¸ä¼¼çš„ç•Œé¢è®¾è®¡ |

## æ—¶é—´è®¡åˆ’ï¼ˆæ–¹æ¡ˆäºŒï¼‰

### æ€»ä½“æ—¶é—´çº¿
```mermaid
gantt
    title MyFocusme Tauri è¿ç§»è®¡åˆ’ï¼ˆä¿ç•™Javaåç«¯ï¼‰
    dateFormat  YYYY-MM-DD
    section å‡†å¤‡é˜¶æ®µ
    ç¯å¢ƒæ­å»º           :2024-01-15, 1d
    section Javaåç«¯æ”¹é€ 
    æ·»åŠ Spring Boot    :2024-01-16, 1d
    WebSocketæ¥å£     :2024-01-17, 1d
    APIæš´éœ²           :2024-01-18, 1d
    section å‰ç«¯å¼€å‘
    Reactç•Œé¢å¼€å‘      :2024-01-19, 2d
    Taurié›†æˆ         :2024-01-21, 1d
    ç³»ç»Ÿæ‰˜ç›˜          :2024-01-22, 1d
    section é›†æˆæµ‹è¯•
    åŠŸèƒ½æµ‹è¯•          :2024-01-23, 2d
    æ‰“åŒ…å‘å¸ƒ          :2024-01-25, 1d
```

### é‡Œç¨‹ç¢‘
- **M1** (ç¬¬3å¤©): Javaåç«¯APIå°±ç»ª
- **M2** (ç¬¬7å¤©): Reactå‰ç«¯å®Œæˆ
- **M3** (ç¬¬10å¤©): å®Œæ•´åº”ç”¨å¯å‘å¸ƒ

## å†³ç­–å»ºè®®

### æ ¸å¿ƒå†³ç­–ï¼šæ˜¯å¦çœŸçš„éœ€è¦è¿ç§»ï¼Ÿ

åŸºäºæ¡†æ¶æœ¬è´¨çš„ç†è§£ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è¯„ä¼°è¿ç§»çš„å¿…è¦æ€§ï¼š

#### ğŸ¤” è¿ç§»ä»·å€¼è¯„ä¼°

| è¯„ä¼°ç»´åº¦ | JavaFXç°çŠ¶ | è¿ç§»åæ”¹å–„ | å€¼å¾—è¿ç§»ï¼Ÿ |
|---------|-----------|-----------|-----------|
| **åŠŸèƒ½å®Œæ•´æ€§** | âœ… æ­£å¸¸ | æ— å˜åŒ– | âŒ |
| **æ€§èƒ½è¡¨ç°** | å¯æ¥å— | ç•¥æœ‰æå‡ | ğŸŸ¡ |
| **ç•Œé¢ç¾è§‚** | ä¸€èˆ¬ | æ˜¾è‘—æå‡ | âœ… |
| **å¼€å‘ä½“éªŒ** | ä¼ ç»Ÿ | ç°ä»£åŒ– | âœ… |
| **ç»´æŠ¤æˆæœ¬** | ä½ | å¢åŠ  | âŒ |

### æœ€ç»ˆå»ºè®®

#### æ–¹æ¡ˆAï¼š**ä¸è¿ç§»ï¼Œä¼˜åŒ–ç°æœ‰JavaFX** ï¼ˆæ¨è â­ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- åº”ç”¨åŠŸèƒ½ç¨³å®šï¼Œç”¨æˆ·æ— æŠ•è¯‰
- å›¢é˜Ÿç†Ÿæ‚‰JavaFX
- ä¸æƒ³æŠ•å…¥2å‘¨å¼€å‘æ—¶é—´

**ä¼˜åŒ–å»ºè®®**ï¼š
```java
// ä½¿ç”¨ JFoenix æˆ– MaterialFX ç¾åŒ–ç•Œé¢
dependencies {
    implementation 'com.jfoenix:jfoenix:9.0.10'
}
```

**æˆæœ¬æ”¶ç›Š**ï¼š
- æŠ•å…¥ï¼š1-2å¤©
- æ”¶ç›Šï¼šç•Œé¢æ”¹å–„60%
- é£é™©ï¼šæä½

#### æ–¹æ¡ˆBï¼š**Tauri + Java æ··åˆæ¶æ„**

**é€‚ç”¨åœºæ™¯**ï¼š
- å¼ºçƒˆéœ€è¦Reactç”Ÿæ€
- è®¡åˆ’é•¿æœŸè¿­ä»£æ–°åŠŸèƒ½
- æ„¿æ„æ¥å—æ¶æ„å¤æ‚åº¦

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ éœ€è¦ç»´æŠ¤ä¸¤ä¸ªè¿›ç¨‹
- âš ï¸ è°ƒè¯•æ›´å¤æ‚
- âš ï¸ æ€§èƒ½æå‡æœ‰é™ï¼ˆJVMä»ç„¶å­˜åœ¨ï¼‰

**çœŸå®æ”¶ç›Š**ï¼š
- UIç°ä»£åŒ– âœ…
- æ€§èƒ½ç•¥æœ‰æå‡ ğŸŸ¡
- æ¶æ„æ›´å¤æ‚ âŒ

#### æ–¹æ¡ˆCï¼š**å­¦ä¹ Swiftï¼ŒåšåŸç”ŸmacOSåº”ç”¨**

**å¦‚æœçœŸè¦é‡å†™**ï¼š
- æ—¢ç„¶æ˜¯macOSä¸“å±åº”ç”¨
- ä¸å¦‚ç›´æ¥ç”¨Swift + SwiftUI
- æ€§èƒ½æœ€ä½³ï¼Œä½“éªŒæœ€å¥½

### ğŸ¯ è¯šå®çš„ç»“è®º

**ä¿ç•™Javaåç«¯çš„Tauriè¿ç§»**ï¼š
- ä¸»è¦ä»·å€¼ï¼š**UIç°ä»£åŒ–**
- æ€§èƒ½æå‡ï¼š**æœ‰é™**ï¼ˆ30-40%ï¼‰
- æ—¶é—´æˆæœ¬ï¼š**2å‘¨**
- ç»´æŠ¤æˆæœ¬ï¼š**å¢åŠ **

**æŠ•èµ„å›æŠ¥ç‡ï¼ˆROIï¼‰åˆ†æ**ï¼š
```
ROI = (æ”¶ç›Š - æˆæœ¬) / æˆæœ¬
    = (UIæ”¹å–„ - 2å‘¨å¼€å‘ - æ¶æ„å¤æ‚åº¦) / 2å‘¨å¼€å‘
    = çº¦ 20-30%
```

### ğŸ“Œ è¡ŒåŠ¨å»ºè®®

1. **å…ˆå°è¯•ä½æˆæœ¬æ–¹æ¡ˆ**
   - ç”¨1å¤©æ—¶é—´å°è¯•JFoenixç¾åŒ–
   - è¯„ä¼°æ•ˆæœæ˜¯å¦æ»¡æ„

2. **å¦‚æœå¿…é¡»è¿ç§»**
   - é€‰æ‹©Tauri + Javaï¼ˆæ–¹æ¡ˆäºŒï¼‰
   - åˆ†é˜¶æ®µå®æ–½ï¼Œå…ˆåšPOC

3. **é•¿è¿œè€ƒè™‘**
   - å¦‚æœæœ‰å¤šä¸ªé¡¹ç›®ï¼Œå­¦ä¹ Reactæœ‰ä»·å€¼
   - å¦‚æœåªæœ‰è¿™ä¸€ä¸ªé¡¹ç›®ï¼Œä¿æŒJavaFXæ›´å®é™…

### æˆåŠŸæ ‡å‡†ï¼ˆå¦‚æœé€‰æ‹©è¿ç§»ï¼‰
- [ ] UIç¾è§‚åº¦æå‡ > 50%
- [ ] ç”¨æˆ·æ»¡æ„åº¦æå‡ > 30%
- [ ] ç»´æŠ¤æˆæœ¬ä¸å¢åŠ  > 20%
- [ ] 2å‘¨å†…å®ŒæˆåŸºæœ¬åŠŸèƒ½

---

## é™„å½•

### å­¦ä¹ èµ„æº
- [Rust å®˜æ–¹æ•™ç¨‹](https://www.rust-lang.org/learn)
- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/v1/guides/)
- [React + TypeScript æœ€ä½³å®è·µ](https://react-typescript-cheatsheet.netlify.app/)

### ç¤ºä¾‹ä»£ç ä»“åº“
- [Tauri ç¤ºä¾‹åº”ç”¨](https://github.com/tauri-apps/examples)
- [Rust macOS é›†æˆç¤ºä¾‹](https://github.com/rust-lang/rust-by-example)

### è”ç³»æ–¹å¼
å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»é¡¹ç›®è´Ÿè´£äººã€‚

---

*æ–‡æ¡£ç‰ˆæœ¬: 3.0*
*åˆ›å»ºæ—¥æœŸ: 2025-10-12*
*æœ€åæ›´æ–°: 2025-10-12*
*æ›´æ–°å†…å®¹:*
- *v2.0: æ·»åŠ ä¿ç•™Javaåç«¯çš„æ¶æ„æ–¹æ¡ˆ*
- *v3.0: æ·»åŠ æ¡†æ¶æœ¬è´¨è§£æï¼Œæ¾„æ¸…Tauri/Electronéƒ½ä¸æ˜¯çº¯å‰ç«¯æ¡†æ¶*
- *v3.0: é‡æ–°è¯„ä¼°è¿ç§»å¿…è¦æ€§ï¼Œç»™å‡ºæ›´å®¢è§‚çš„å»ºè®®*